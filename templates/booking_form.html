<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amatic+SC&family=Barlow+Condensed&family=Barlow:wght@200;400&family=Dancing+Script&family=Fira+Sans&family=Handjet&family=Inter:wght@200&family=Roboto:wght@100&family=Varela+Round&display=swap" rel="stylesheet">
    <title>Dra. Arely Uribe | Agendar Cita</title>
</head>
<body>
    <div class="booking-bg">
        <div class="navbar-background">
            <div class="nav-bar">
                <div class="logo">
                    <img src="/../static/img/Arely's_Logo.png" class="navbar-logo" alt="Logo_img">
                </div>
                <div class="nav-links">
                    <a href="/" class="btn-return">Regresar</a>
                </div>
            </div>
        </div>
        <h1 class="block-title">Agendar Cita</h1>
        <div class="validation-text">
            {% with messages = get_flashed_messages() %}     <!-- declare a variable called messages -->
                {% if messages %}                            <!-- check if there are any messages -->
                    {% for message in messages %}            <!-- loop through the messages -->
                        <p>{{message}}</p>                   <!-- display each message in a paragraph tag -->
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>
        <form method="post" action="/book" class="booking-form">
            {{ form.csrf_token }}
            <div>
                <label for="name">Nombre Completo:</label>
                <input type="text" class="input-field" name="name">
            </div>
            <div>
                <label for="email">Email:</label>
                <input type="email" class="input-field" name="email">
            </div>
            <div>
                <label for="phone">Tel√©fono:</label>
                <input type="text" class="input-field" name="phone">
            </div>
            <div class="date-time">
                <div class="date-field">
                    <label for="date">Fecha:</label>
                    <input type="date" id="appointmentDate" class="date-field" name="date">
                </div>
                <div class="time-field" id="timeField">
                    <label for="time">Hora:</label>
                    <select id="appointmentTime" name="time"></select>
                </div>
            </div>
            <div class="button-container">
                <button type="submit">Agendar</button>
            </div>
        </form>
    </div>
    <script>
    // Populate the dropdown with 30-minute intervals
    var dropdown = document.getElementById("appointmentTime");
    
    
    for (var hours = 10; hours <= 17; hours++) {
        for (var minutes = 0; minutes < 60; minutes += 30) {
            var ampm = hours >= 12 ? 'PM' : 'AM';
            var displayHours = hours % 12 || 12; // Convert 0 to 12
            var timeString = (displayHours < 10 ? "0" : "") + displayHours + ":" + (minutes === 0 ? "00" : minutes) + " " + ampm;

            var option = document.createElement("option");
            option.text = timeString;
            option.value = timeString;

            dropdown.add(option);
        }
    }
    </script>      
</body>
</html>